<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://bootsfaces.net/ui" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

<f:metadata>
	<f:event type="preRenderView" listener="#{indexBean.onPageLoad}" />
</f:metadata>

<o:importConstants type="submerge.web.constant.Pages" var="Pages" />

<f:view locale="#{userBean.locale}">
	<h:head>
		<meta name="description" content="#{msg['about.howto.answer']}" />
		<ui:include src="#{Pages.HEADER_CONTENT.fullPath}" />
		<h:outputStylesheet name="bootstrap-colorpicker-master/css/bootstrap-colorpicker.min.css" />
		<h:outputScript library="bootstrap-colorpicker-master" name="js/bootstrap-colorpicker.min.js" />
		<h:outputScript library="default" name="js/commons-ass.js" />
		<h:outputStylesheet library="default" name="css/index.css" />
	</h:head>
	<h:body>
		<h:panelGroup layout="block" id="wrap">
			<ui:include src="#{Pages.NAVBAR.fullPath}" />
			<h:form class="form" id="index-form" name="index-form" enctype="multipart/form-data" styleClass="form-horizontal">
				<b:container id="container">
					<h:panelGroup id="div-starter">
						<b:alert id="alert-login" severity="info">
							<b:iconAwesome id="ico-alert-login" name="info-circle" />
							<h:outputText id="msg-alert-login" value=" #{msg['index.warningRegister']}" escape="false" rendered="#{!userBean.logged}" />
							<h:outputText id="msg-alert-saveSettings" value=" #{msg['index.howToSaveSettings']}" escape="false" rendered="#{userBean.logged}" />
						</b:alert>
						<b:row id="row-panel">
							<b:column col-lg="6" id="column-panel-top">
								<b:panel title="#{msg['index.topSubtitle']}" collapsible="false" id="panel-top" styleClass="sub-panel">
									<h:panelGroup id="group-upload-top" layout="block" styleClass="upload-zone">
										<p:fileUpload id="topUpload" fileUploadListener="#{indexBean.handleFileUpload}" label="#{msg['index.choose']}" auto="true" sizeLimit="1048576"
											allowTypes="/(\.|\/)(srt|ass|ssa)$/" update="topUploadMessage" required="false">
										</p:fileUpload>
										<p:messages id="topUploadMessage" for="topUpload" redisplay="false" showDetail="true" closable="false" styleClass="uploadMessage" />
									</h:panelGroup>
									<b:row id="row-color-top" styleClass="form-group">
										<b:column col-lg="5" id="col-color-top" styleClass="panel-label">
											<h:outputLabel id="label-color-top" value="#{msg['sub.color']}" />
										</b:column>
										<b:column col-lg="7">
											<h:panelGroup layout="block" styleClass="input-group color-picker color">
												<h:inputText id="topColor" value="#{userSubConfigBean.profileTop.primaryColor}" class="form-control" required="true"
													requiredMessage="#{msg['validator.requiredField']}" validatorMessage="#{msg['validator.invalid.color']}">
													<f:validator validatorId="webColorValidator" />
												</h:inputText>
												<span class="input-group-addon"><i></i></span>
											</h:panelGroup>
										</b:column>
									</b:row>
									<b:row>
										<b:column col-lg="5"></b:column>
										<b:column col-lg="7">
											<p:message id="topColorMessage" for="topColor" />
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.outlineColor']}" />
										</b:column>
										<b:column col-lg="7">
											<h:panelGroup layout="block" styleClass="input-group color-picker outlineColor">
												<h:inputText id="topOutlineColor" value="#{userSubConfigBean.profileTop.outlineColor}" class="form-control" required="true"
													requiredMessage="#{msg['validator.requiredField']}" validatorMessage="#{msg['validator.invalid.color']}">
													<f:validator validatorId="webColorValidator" />
												</h:inputText>
												<span class="input-group-addon"><i></i></span>
											</h:panelGroup>
										</b:column>
									</b:row>
									<b:row>
										<b:column col-lg="5"></b:column>
										<b:column col-lg="7">
											<p:message id="topOutlineColorMessage" for="topOutlineColor" />
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.outline']}" />
										</b:column>
										<b:column col-lg="7">
											<h:selectOneMenu value="#{userSubConfigBean.profileTop.outlineWidth}" styleClass="form-control outlineWidth">
												<f:selectItems value="#{dropDownBean.outlineWidth}" />
											</h:selectOneMenu>
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" id="top-fontname" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.fontname']}" />
											<b:iconAwesome id="top-ico-fontname" name="info-circle" tooltip-position="top" tooltip="#{msg['sub.fontname.mustBeInstalled']}" />
										</b:column>
										<b:column col-lg="7">
											<h:selectOneMenu value="#{userSubConfigBean.profileTop.fontName}" styleClass="form-control fontName">
												<f:selectItems value="#{dropDownBean.fontName}" var="font" itemValue="#{font.name}" itemLabel="#{font.name}" />
											</h:selectOneMenu>
										</b:column>
									</b:row>

									<b:row styleClass="form-group">
										<b:column col-lg="5" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.fontsize']}" />
										</b:column>
										<b:column col-lg="7">
											<h:selectOneMenu value="#{userSubConfigBean.profileTop.fontSize}" styleClass="form-control fontSize">
												<f:selectItems value="#{dropDownBean.fontSize}" />
											</h:selectOneMenu>
										</b:column>
									</b:row>
									<h:panelGroup class="fontPreview" layout="block">
										<h:panelGroup class="previewLanguageSelect" layout="block">
											<h:panelGroup styleClass="preview-language currentLanguage" layout="block">
												<h:graphicImage library="default" name="img/flags/#{indexBean.languageTop}.png" />
											</h:panelGroup>
											<ul class="dropDownLanguage">
												<ui:repeat value="#{localizedDropDownBean.countries.keySet().toArray()}" var="key">
													<h:panelGroup rendered="#{key.language != indexBean.languageTop}">
														<li><h:commandLink action="#{indexBean.updatePreviewLanguageTop}">
																<p class="language">
																	<f:param name="languageToSet" value="#{key.language}"></f:param>
																	<h:graphicImage styleClass="img-country" library="default" name="img/flags/#{key.language}.png" />
																</p>
															</h:commandLink></li>
													</h:panelGroup>
												</ui:repeat>
											</ul>
										</h:panelGroup>
										<span class="textPreview">#{indexBean.previewTop}</span>
									</h:panelGroup>
								</b:panel>
							</b:column>
							<b:column col-lg="6" id="column-panel-bottom">
								<b:panel title="#{msg['index.bottomSubtitle']}" collapsible="false" id="panel-bottom" styleClass="sub-panel">
									<h:panelGroup id="group-upload-bottom" layout="block" styleClass="upload-zone">
										<p:fileUpload id="bottomUpload" fileUploadListener="#{indexBean.handleFileUpload}" value="#{userSubConfigBean.profileBottom.file}"
											label="#{msg['index.choose']}" auto="true" sizeLimit="1048576" allowTypes="/(\.|\/)(srt|ass|ssa)$/" update="bottomUploadMessage" required="false" />
										<p:messages id="bottomUploadMessage" for="bottomUpload" redisplay="false" showDetail="true" closable="false" styleClass="uploadMessage" />
									</h:panelGroup>
									<b:row id="row-color-bottom" styleClass="form-group">
										<b:column col-lg="5" id="col-color-bottom">
											<h:outputLabel id="label-color-bottom" value="#{msg['sub.color']}" />
										</b:column>
										<b:column col-lg="7">
											<h:panelGroup layout="block" styleClass="input-group color-picker color">
												<h:inputText id="bottomColor" value="#{userSubConfigBean.profileBottom.primaryColor}" class="form-control" required="true"
													requiredMessage="#{msg['validator.requiredField']}" validatorMessage="#{msg['validator.invalid.color']}">
													<f:validator validatorId="webColorValidator" />
												</h:inputText>
												<span class="input-group-addon"><i></i></span>
											</h:panelGroup>
										</b:column>
									</b:row>
									<b:row>
										<b:column col-lg="5"></b:column>
										<b:column col-lg="7">
											<p:message id="bottomColorMessage" for="bottomColor" />
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.outlineColor']}" />
										</b:column>
										<b:column col-lg="7">
											<h:panelGroup layout="block" styleClass="input-group color-picker outlineColor">
												<h:inputText id="bottomOutlineColor" value="#{userSubConfigBean.profileBottom.outlineColor}" class="form-control" required="true"
													requiredMessage="#{msg['validator.requiredField']}" validatorMessage="#{msg['validator.invalid.color']}">
													<f:validator validatorId="webColorValidator" />
												</h:inputText>
												<span class="input-group-addon"><i></i></span>
											</h:panelGroup>
										</b:column>
									</b:row>
									<b:row>
										<b:column col-lg="5"></b:column>
										<b:column col-lg="7">
											<p:message id="bottomOutlineColorMessage" for="bottomOutlineColor" />
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.outline']}" />
										</b:column>
										<b:column col-lg="7">
											<h:selectOneMenu value="#{userSubConfigBean.profileBottom.outlineWidth}" styleClass="form-control outlineWidth">
												<f:selectItems value="#{dropDownBean.outlineWidth}" />
											</h:selectOneMenu>
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" id="bottom-fontname" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.fontname']}" />
											<b:iconAwesome id="bottom-ico-fontname" name="info-circle" tooltip-position="top" tooltip="#{msg['sub.fontname.mustBeInstalled']}" />
										</b:column>
										<b:column col-lg="7">
											<h:selectOneMenu value="#{userSubConfigBean.profileBottom.fontName}" styleClass="form-control fontName">
												<f:selectItems value="#{dropDownBean.fontName}" var="font" itemValue="#{font.name}" itemLabel="#{font.name}" />
											</h:selectOneMenu>
										</b:column>
									</b:row>
									<b:row styleClass="form-group">
										<b:column col-lg="5" styleClass="panel-label">
											<h:outputLabel value="#{msg['sub.fontsize']}" />
										</b:column>
										<b:column col-lg="7">
											<h:selectOneMenu value="#{userSubConfigBean.profileBottom.fontSize}" styleClass="form-control fontSize">
												<f:selectItems value="#{dropDownBean.fontSize}" />
											</h:selectOneMenu>
										</b:column>
									</b:row>
									<h:panelGroup class="fontPreview" layout="block">
										<h:panelGroup class="previewLanguageSelect" layout="block">
											<h:panelGroup styleClass="preview-language currentLanguage" layout="block">
												<h:graphicImage library="default" name="img/flags/#{indexBean.languageBottom}.png" />
											</h:panelGroup>
											<ul class="dropDownLanguage">
												<ui:repeat value="#{localizedDropDownBean.countries.keySet().toArray()}" var="key">
													<h:panelGroup rendered="#{key.language != indexBean.languageBottom}">
														<li><h:commandLink action="#{indexBean.updatePreviewLanguageBottom}">
																<p class="language">
																	<f:param name="languageToSet" value="#{key.language}"></f:param>
																	<h:graphicImage styleClass="img-country" library="default" name="img/flags/#{key.language}.png" />
																</p>
															</h:commandLink></li>
													</h:panelGroup>
												</ui:repeat>
											</ul>
										</h:panelGroup>
										<span class="textPreview">#{indexBean.previewBottom}</span>
									</h:panelGroup>
								</b:panel>
							</b:column>
							<b:column col-lg="12">
								<b:panel title="#{msg['index.outputFile']}" collapsible="false">
									<b:row>
										<b:column offset-lg="3" col-lg="6" offset-sm="1" col-sm="10" offset-xs="1" col-xs="10">
											<b:inputText tooltip="#{msg['sub.filename.tooltip']}" tooltip-delay="300" tooltip-position="top" fieldSize="sm" placeholder="#{msg['sub.filename']}" value="#{userSubConfigBean.filename}" maxlength="200">
												<f:facet name="append">
													<h:outputText value=".ass" />
												</f:facet>
											</b:inputText>
										</b:column>
									</b:row>
									<h:panelGroup layout="block" styleClass="form-group text-center">
										<p:commandButton id="commandButtonDownload" value="#{msg['index.download']}" ajax="false">
											<p:fileDownload id="fileDownloadButton" value="#{indexBean.generatedFile}" />
										</p:commandButton>
									</h:panelGroup>
								</b:panel>
							</b:column>
						</b:row>
					</h:panelGroup>                   
				</b:container>
			</h:form>
			<h:panelGroup id="push" layout="block" styleClass="push" />
		</h:panelGroup>
		<ui:include src="#{Pages.FOOTER.fullPath}" />
	</h:body>
</f:view>
</html>